#!/usr/bin/python3
# -*- coding: utf-8 -*-

import cmd
import time
import sys
from decimal import *
import time
import binance
from datetime import datetime
from email.mime.text import MIMEText

i = datetime.now()
srtime = i.strftime('%Y/%m/%d %H:%M:%S')

my_file = open("coins.txt", "rb")
for line in my_file:
        l = [i.strip() for i in line.decode().split(' ')]
        coin = l[0]
        last_24hr = binance.ticker_24hr("%s" % (coin))
        change_24hr = round (Decimal (last_24hr["priceChangePercent"]), 2)
        candles = binance.candlesticks('%s' % (coin), "1h" , "81")   # 1 hr period last 81 candle close price values
        candleclose1 = float(candles[0][4])
        candleclose2 = float(candles[1][4])
        candleclose3 = float(candles[2][4])
        candleclose4 = float(candles[3][4])
        candleclose5 = float(candles[4][4])
        candleclose6 = float(candles[5][4])
        candleclose7 = float(candles[6][4])
        candleclose8 = float(candles[7][4])
        candleclose9 = float(candles[8][4])
        candleclose10 = float(candles[9][4])
        candleclose11 = float(candles[10][4])
        candleclose12 = float(candles[11][4])
        candleclose13 = float(candles[12][4])
        candleclose14 = float(candles[13][4])
        candleclose15 = float(candles[14][4])
        candleclose16 = float(candles[15][4])
        candleclose17 = float(candles[16][4])
        candleclose18 = float(candles[17][4])
        candleclose19 = float(candles[18][4])
        candleclose20 = float(candles[19][4])
        candleclose21 = float(candles[20][4])
        candleclose22 = float(candles[21][4])
        candleclose23 = float(candles[22][4])
        candleclose24 = float(candles[23][4])
        candleclose25 = float(candles[24][4])
        candleclose26 = float(candles[25][4])
        candleclose27 = float(candles[26][4])
        candleclose28 = float(candles[27][4])
        candleclose29 = float(candles[28][4])
        candleclose30 = float(candles[29][4])
        candleclose31 = float(candles[30][4])
        candleclose32 = float(candles[31][4])
        candleclose33 = float(candles[32][4])
        candleclose34 = float(candles[33][4])
        candleclose35 = float(candles[34][4])
        candleclose36 = float(candles[35][4])
        candleclose37 = float(candles[36][4])
        candleclose38 = float(candles[37][4])
        candleclose39 = float(candles[38][4])
        candleclose40 = float(candles[39][4])
        candleclose41 = float(candles[40][4])
        candleclose42 = float(candles[41][4])
        candleclose43 = float(candles[42][4])
        candleclose44 = float(candles[43][4])
        candleclose45 = float(candles[44][4])
        candleclose46 = float(candles[45][4])
        candleclose47 = float(candles[46][4])
        candleclose48 = float(candles[47][4])
        candleclose49 = float(candles[48][4])
        candleclose50 = float(candles[49][4])
        candleclose51 = float(candles[50][4])
        candleclose52 = float(candles[51][4])
        candleclose53 = float(candles[52][4])
        candleclose54 = float(candles[53][4])
        candleclose55 = float(candles[54][4])
        candleclose56 = float(candles[55][4])
        candleclose57 = float(candles[56][4])
        candleclose58 = float(candles[57][4])
        candleclose59 = float(candles[58][4])
        candleclose60 = float(candles[59][4])
        candleclose61 = float(candles[60][4])
        candleclose62 = float(candles[61][4])
        candleclose63 = float(candles[62][4])
        candleclose64 = float(candles[63][4])
        candleclose65 = float(candles[64][4])
        candleclose66 = float(candles[65][4])
        candleclose67 = float(candles[66][4])
        candleclose68 = float(candles[67][4])
        candleclose69 = float(candles[68][4])
        candleclose70 = float(candles[69][4])
        candleclose71 = float(candles[70][4])
        candleclose72 = float(candles[71][4])
        candleclose73 = float(candles[72][4])
        candleclose74 = float(candles[73][4])
        candleclose75 = float(candles[74][4])
        candleclose76 = float(candles[75][4])
        candleclose77 = float(candles[76][4])
        candleclose78 = float(candles[77][4])
        candleclose79 = float(candles[78][4])
        candleclose80 = float(candles[79][4])
        prices = [candleclose1,candleclose2,candleclose3,candleclose4,candleclose5,candleclose6,candleclose7,candleclose8,candleclose9,candleclose10,candleclose11,candleclose12,candleclose13,candleclose14,candleclose15,candleclose16,candleclose17,candleclose18,candleclose19,candleclose20,candleclose21,candleclose22,candleclose23,candleclose24,candleclose25,candleclose26,candleclose27,candleclose28,candleclose29,candleclose30,candleclose31,candleclose32,candleclose33,candleclose34,candleclose35,candleclose36,candleclose37,candleclose38,candleclose39,candleclose40,candleclose41,candleclose42,candleclose43,candleclose44,candleclose45,candleclose46,candleclose47,candleclose48,candleclose49,candleclose50]
        ilk12list = [candleclose1,candleclose2,candleclose3,candleclose4,candleclose5,candleclose6,candleclose7,candleclose8,candleclose9,candleclose10 ,candleclose11 ,candleclose12]
        ilk26list = [candleclose1,candleclose2,candleclose3,candleclose4,candleclose5,candleclose6,candleclose7,candleclose8,candleclose9,candleclose10,candleclose11,candleclose12,candleclose13,candleclose14,candleclose15,candleclose16,candleclose17,candleclose18,candleclose19,candleclose20,candleclose21,candleclose22,candleclose23,candleclose24,candleclose25,candleclose26]
        ilk12ort = round(float(sum(ilk12list) / len(ilk12list)), 10)
        day12ema13 = (candleclose13*(2/13)) + (ilk12ort*(1-(2/13)))
        day12ema14 = (candleclose14*(2/13)) + (day12ema13*(1-(2/13)))
        day12ema15 = (candleclose15*(2/13)) + (day12ema14*(1-(2/13)))
        day12ema16 = (candleclose16*(2/13)) + (day12ema15*(1-(2/13)))
        day12ema17 = (candleclose17*(2/13)) + (day12ema16*(1-(2/13)))
        day12ema18 = (candleclose18*(2/13)) + (day12ema17*(1-(2/13)))
        day12ema19 = (candleclose19*(2/13)) + (day12ema18*(1-(2/13)))
        day12ema20 = (candleclose20*(2/13)) + (day12ema19*(1-(2/13)))
        day12ema21 = (candleclose21*(2/13)) + (day12ema20*(1-(2/13)))
        day12ema22 = (candleclose22*(2/13)) + (day12ema21*(1-(2/13)))
        day12ema23 = (candleclose23*(2/13)) + (day12ema22*(1-(2/13)))
        day12ema24 = (candleclose24*(2/13)) + (day12ema23*(1-(2/13)))
        day12ema25 = (candleclose25*(2/13)) + (day12ema24*(1-(2/13)))
        day12ema26 = (candleclose26*(2/13)) + (day12ema25*(1-(2/13)))
        day12ema27 = (candleclose27*(2/13)) + (day12ema26*(1-(2/13)))
        day12ema28 = (candleclose28*(2/13)) + (day12ema27*(1-(2/13)))
        day12ema29 = (candleclose29*(2/13)) + (day12ema28*(1-(2/13)))
        day12ema30 = (candleclose30*(2/13)) + (day12ema29*(1-(2/13)))
        day12ema31 = (candleclose31*(2/13)) + (day12ema30*(1-(2/13)))
        day12ema32 = (candleclose32*(2/13)) + (day12ema31*(1-(2/13)))
        day12ema33 = (candleclose33*(2/13)) + (day12ema32*(1-(2/13)))
        day12ema34 = (candleclose34*(2/13)) + (day12ema33*(1-(2/13)))
        day12ema35 = (candleclose35*(2/13)) + (day12ema34*(1-(2/13)))
        day12ema36 = (candleclose36*(2/13)) + (day12ema35*(1-(2/13)))
        day12ema37 = (candleclose37*(2/13)) + (day12ema36*(1-(2/13)))
        day12ema38 = (candleclose38*(2/13)) + (day12ema37*(1-(2/13)))
        day12ema39 = (candleclose39*(2/13)) + (day12ema38*(1-(2/13)))
        day12ema40 = (candleclose40*(2/13)) + (day12ema39*(1-(2/13)))
        day12ema41 = (candleclose41*(2/13)) + (day12ema40*(1-(2/13)))
        day12ema42 = (candleclose42*(2/13)) + (day12ema41*(1-(2/13)))
        day12ema43 = (candleclose43*(2/13)) + (day12ema42*(1-(2/13)))
        day12ema44 = (candleclose44*(2/13)) + (day12ema43*(1-(2/13)))
        day12ema45 = (candleclose45*(2/13)) + (day12ema44*(1-(2/13)))
        day12ema46 = (candleclose46*(2/13)) + (day12ema45*(1-(2/13)))
        day12ema47 = (candleclose47*(2/13)) + (day12ema46*(1-(2/13)))
        day12ema48 = (candleclose48*(2/13)) + (day12ema47*(1-(2/13)))
        day12ema49 = (candleclose49*(2/13)) + (day12ema48*(1-(2/13)))
        day12ema50 = (candleclose50*(2/13)) + (day12ema49*(1-(2/13)))
        day12ema51 = (candleclose51*(2/13)) + (day12ema50*(1-(2/13)))
        day12ema52 = (candleclose52*(2/13)) + (day12ema51*(1-(2/13)))
        day12ema53 = (candleclose53*(2/13)) + (day12ema52*(1-(2/13)))
        day12ema54 = (candleclose54*(2/13)) + (day12ema53*(1-(2/13)))
        day12ema55 = (candleclose55*(2/13)) + (day12ema54*(1-(2/13)))
        day12ema56 = (candleclose56*(2/13)) + (day12ema55*(1-(2/13)))
        day12ema57 = (candleclose57*(2/13)) + (day12ema56*(1-(2/13)))
        day12ema58 = (candleclose58*(2/13)) + (day12ema57*(1-(2/13)))
        day12ema59 = (candleclose59*(2/13)) + (day12ema58*(1-(2/13)))
        day12ema60 = (candleclose60*(2/13)) + (day12ema59*(1-(2/13)))
        day12ema61 = (candleclose61*(2/13)) + (day12ema50*(1-(2/13)))
        day12ema62 = (candleclose62*(2/13)) + (day12ema61*(1-(2/13)))
        day12ema63 = (candleclose63*(2/13)) + (day12ema62*(1-(2/13)))
        day12ema64 = (candleclose64*(2/13)) + (day12ema63*(1-(2/13)))
        day12ema65 = (candleclose65*(2/13)) + (day12ema64*(1-(2/13)))
        day12ema66 = (candleclose66*(2/13)) + (day12ema65*(1-(2/13)))
        day12ema67 = (candleclose67*(2/13)) + (day12ema66*(1-(2/13)))
        day12ema68 = (candleclose68*(2/13)) + (day12ema67*(1-(2/13)))
        day12ema69 = (candleclose69*(2/13)) + (day12ema68*(1-(2/13)))
        day12ema70 = (candleclose70*(2/13)) + (day12ema69*(1-(2/13)))
        day12ema71 = (candleclose71*(2/13)) + (day12ema70*(1-(2/13)))
        day12ema72 = (candleclose72*(2/13)) + (day12ema71*(1-(2/13)))
        day12ema73 = (candleclose73*(2/13)) + (day12ema72*(1-(2/13)))
        day12ema74 = (candleclose74*(2/13)) + (day12ema73*(1-(2/13)))
        day12ema75 = (candleclose75*(2/13)) + (day12ema74*(1-(2/13)))
        day12ema76 = (candleclose76*(2/13)) + (day12ema75*(1-(2/13)))
        day12ema77 = (candleclose77*(2/13)) + (day12ema76*(1-(2/13)))
        day12ema78 = (candleclose78*(2/13)) + (day12ema77*(1-(2/13)))
        day12ema79 = (candleclose79*(2/13)) + (day12ema78*(1-(2/13)))
        day12ema80 = (candleclose80*(2/13)) + (day12ema79*(1-(2/13)))
        day12emalist = [day12ema14,day12ema15,day12ema16,day12ema17,day12ema18,day12ema19,day12ema20,day12ema21,day12ema22,day12ema23,day12ema24,day12ema25,day12ema26,day12ema27,day12ema28,day12ema29,day12ema30,day12ema31,day12ema32,day12ema33,day12ema34,day12ema35,day12ema36,day12ema37,day12ema38,day12ema39,day12ema40,day12ema41,day12ema42,day12ema43,day12ema44,day12ema45,day12ema46,day12ema47,day12ema48,day12ema49,day12ema50,day12ema51,day12ema52,day12ema53,day12ema54,day12ema55,day12ema56,day12ema57,day12ema58,day12ema59,day12ema60,day12ema61,day12ema62,day12ema63,day12ema64,day12ema65,day12ema66,day12ema67,day12ema68,day12ema69,day12ema70,day12ema71,day12ema72,day12ema73,day12ema74,day12ema75,day12ema76,day12ema77,day12ema78,day12ema79,day12ema80]
        ilk26ort = round(float(sum(ilk26list) / len(ilk26list)), 10)
        day26ema27 = (candleclose13*(2/27)) + (ilk26ort*(1-(2/27)))
        day26ema28 = (candleclose28*(2/27)) + (day26ema27*(1-(2/27)))
        day26ema29 = (candleclose29*(2/27)) + (day26ema28*(1-(2/27)))
        day26ema30 = (candleclose30*(2/27)) + (day26ema29*(1-(2/27)))
        day26ema31 = (candleclose31*(2/27)) + (day26ema30*(1-(2/27)))
        day26ema32 = (candleclose32*(2/27)) + (day26ema31*(1-(2/27)))
        day26ema33 = (candleclose33*(2/27)) + (day26ema32*(1-(2/27)))
        day26ema34 = (candleclose34*(2/27)) + (day26ema33*(1-(2/27)))
        day26ema35 = (candleclose35*(2/27)) + (day26ema34*(1-(2/27)))
        day26ema36 = (candleclose36*(2/27)) + (day26ema35*(1-(2/27)))
        day26ema37 = (candleclose37*(2/27)) + (day26ema36*(1-(2/27)))
        day26ema38 = (candleclose38*(2/27)) + (day26ema37*(1-(2/27)))
        day26ema39 = (candleclose39*(2/27)) + (day26ema38*(1-(2/27)))
        day26ema40 = (candleclose40*(2/27)) + (day26ema39*(1-(2/27)))
        day26ema41 = (candleclose41*(2/27)) + (day26ema40*(1-(2/27)))
        day26ema42 = (candleclose42*(2/27)) + (day26ema41*(1-(2/27)))
        day26ema43 = (candleclose43*(2/27)) + (day26ema42*(1-(2/27)))
        day26ema44 = (candleclose44*(2/27)) + (day26ema43*(1-(2/27)))
        day26ema45 = (candleclose45*(2/27)) + (day26ema44*(1-(2/27)))
        day26ema46 = (candleclose46*(2/27)) + (day26ema45*(1-(2/27)))
        day26ema47 = (candleclose47*(2/27)) + (day26ema46*(1-(2/27)))
        day26ema48 = (candleclose48*(2/27)) + (day26ema47*(1-(2/27)))
        day26ema49 = (candleclose49*(2/27)) + (day26ema48*(1-(2/27)))
        day26ema50 = (candleclose50*(2/27)) + (day26ema49*(1-(2/27)))
        day26ema51 = (candleclose51*(2/27)) + (day12ema50*(1-(2/27)))
        day26ema52 = (candleclose52*(2/27)) + (day12ema51*(1-(2/27)))
        day26ema53 = (candleclose53*(2/27)) + (day12ema52*(1-(2/27)))
        day26ema54 = (candleclose54*(2/27)) + (day12ema53*(1-(2/27)))
        day26ema55 = (candleclose55*(2/27)) + (day12ema54*(1-(2/27)))
        day26ema56 = (candleclose56*(2/27)) + (day12ema55*(1-(2/27)))
        day26ema57 = (candleclose57*(2/27)) + (day12ema56*(1-(2/27)))
        day26ema58 = (candleclose58*(2/27)) + (day12ema57*(1-(2/27)))
        day26ema59 = (candleclose59*(2/27)) + (day12ema58*(1-(2/27)))
        day26ema60 = (candleclose60*(2/27)) + (day12ema59*(1-(2/27)))
        day26ema61 = (candleclose61*(2/27)) + (day12ema50*(1-(2/27)))
        day26ema62 = (candleclose62*(2/27)) + (day12ema61*(1-(2/27)))
        day26ema63 = (candleclose63*(2/27)) + (day12ema62*(1-(2/27)))
        day26ema64 = (candleclose64*(2/27)) + (day12ema63*(1-(2/27)))
        day26ema65 = (candleclose65*(2/27)) + (day12ema64*(1-(2/27)))
        day26ema66 = (candleclose66*(2/27)) + (day12ema65*(1-(2/27)))
        day26ema67 = (candleclose67*(2/27)) + (day12ema66*(1-(2/27)))
        day26ema68 = (candleclose68*(2/27)) + (day12ema67*(1-(2/27)))
        day26ema69 = (candleclose69*(2/27)) + (day12ema68*(1-(2/27)))
        day26ema70 = (candleclose70*(2/27)) + (day12ema69*(1-(2/27)))
        day26ema71 = (candleclose71*(2/27)) + (day12ema70*(1-(2/27)))
        day26ema72 = (candleclose72*(2/27)) + (day12ema71*(1-(2/27)))
        day26ema73 = (candleclose73*(2/27)) + (day12ema72*(1-(2/27)))
        day26ema74 = (candleclose74*(2/27)) + (day12ema73*(1-(2/27)))
        day26ema75 = (candleclose75*(2/27)) + (day12ema74*(1-(2/27)))
        day26ema76 = (candleclose76*(2/27)) + (day12ema75*(1-(2/27)))
        day26ema77 = (candleclose77*(2/27)) + (day12ema76*(1-(2/27)))
        day26ema78 = (candleclose78*(2/27)) + (day12ema77*(1-(2/27)))
        day26ema79 = (candleclose79*(2/27)) + (day12ema78*(1-(2/27)))
        day26ema80 = (candleclose80*(2/27)) + (day12ema79*(1-(2/27)))
        day26emalist = [day26ema27,day26ema28,day26ema29,day26ema30,day26ema31,day26ema32,day26ema33,day26ema34,day26ema35,day26ema36,day26ema37,day26ema38,day26ema39,day26ema40,day26ema41,day26ema42,day26ema43,day26ema44,day26ema45,day26ema46,day26ema47,day26ema48,day26ema49,day26ema50,day26ema51,day26ema52,day26ema53,day26ema54,day26ema55,day26ema56,day26ema57,day26ema58,day26ema59,day26ema60,day26ema61,day26ema62,day26ema63,day26ema64,day26ema65,day26ema66,day26ema67,day26ema68,day26ema69,day26ema70,day26ema71,day26ema72,day26ema73,day26ema74,day26ema75,day26ema76,day26ema77,day26ema78,day26ema79,day26ema80]
        #print ("day26list OK")
        macd27 = (day12ema27 - day26ema27)
        macd28 = (day12ema28 - day26ema28)
        macd29 = (day12ema29 - day26ema29)
        macd30 = (day12ema30 - day26ema30)
        macd31 = (day12ema31 - day26ema31)
        macd32 = (day12ema32 - day26ema32)
        macd33 = (day12ema33 - day26ema33)
        macd34 = (day12ema34 - day26ema34)
        macd35 = (day12ema35 - day26ema35)
        macd36 = (day12ema36 - day26ema36)
        macd37 = (day12ema37 - day26ema37)
        macd38 = (day12ema38 - day26ema38)
        macd39 = (day12ema39 - day26ema39)
        macd40 = (day12ema40 - day26ema40)
        macd41 = (day12ema41 - day26ema41)
        macd42 = (day12ema42 - day26ema42)
        macd43 = (day12ema43 - day26ema43)
        macd44 = (day12ema44 - day26ema44)
        macd45 = (day12ema45 - day26ema45)
        macd46 = (day12ema46 - day26ema46)
        macd47 = (day12ema47 - day26ema47)
        macd48 = (day12ema48 - day26ema48)
        macd49 = (day12ema49 - day26ema49)
        macd50 = (day12ema50 - day26ema50)
        macd51 = (day12ema51 - day26ema51)
        macd52 = (day12ema52 - day26ema52)
        macd53 = (day12ema53 - day26ema53)
        macd54 = (day12ema54 - day26ema54)
        macd55 = (day12ema55 - day26ema55)
        macd56 = (day12ema56 - day26ema56)
        macd57 = (day12ema57 - day26ema57)
        macd58 = (day12ema58 - day26ema58)
        macd59 = (day12ema59 - day26ema59)
        macd60 = (day12ema60 - day26ema60)
        macd61 = (day12ema61 - day26ema61)
        macd62 = (day12ema62 - day26ema62)
        macd63 = (day12ema63 - day26ema63)
        macd64 = (day12ema64 - day26ema64)
        macd65 = (day12ema65 - day26ema65)
        macd66 = (day12ema66 - day26ema66)
        macd67 = (day12ema67 - day26ema67)
        macd68 = (day12ema68 - day26ema68)
        macd69 = (day12ema69 - day26ema69)
        macd60 = (day12ema60 - day26ema60)
        macd61 = (day12ema61 - day26ema61)
        macd62 = (day12ema62 - day26ema62)
        macd63 = (day12ema63 - day26ema63)
        macd64 = (day12ema64 - day26ema64)
        macd65 = (day12ema65 - day26ema65)
        macd66 = (day12ema66 - day26ema66)
        macd67 = (day12ema67 - day26ema67)
        macd68 = (day12ema68 - day26ema68)
        macd69 = (day12ema69 - day26ema69)
        macd70 = (day12ema70 - day26ema70)
        macd71 = (day12ema71 - day26ema71)
        macd72 = (day12ema72 - day26ema72)
        macd73 = (day12ema73 - day26ema73)
        macd74 = (day12ema74 - day26ema74)
        macd75 = (day12ema75 - day26ema75)
        macd76 = (day12ema76 - day26ema76)
        macd77 = (day12ema77 - day26ema77)
        macd78 = (day12ema78 - day26ema78)
        macd79 = (day12ema79 - day26ema79)
        macd80 = (day12ema80 - day26ema80)		
        macdlist = [macd60,macd61,macd62,macd63,macd64,macd65,macd66,macd67,macd68,macd69,macd70,macd71,macd72,macd73,macd74,macd75,macd76,macd77,macd78,macd79,macd80]
        print(*macdlist, sep = "\n")  # last 20 macd values

thstrades.close()
my_file.close()

time.sleep(1)
